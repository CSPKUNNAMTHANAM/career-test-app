<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Advanced Career Aptitude Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #eef3f7;
      padding: 30px;
      max-width: 800px;
      margin: auto;
    }
    h1 {
      color: #0a4d68;
      text-align: center;
    }
    label {
      font-weight: bold;
    }
    .form-section {
      margin-bottom: 25px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    }
    .question {
      margin-bottom: 15px;
    }
    .answers label {
      display: block;
      margin-bottom: 6px;
      cursor: pointer;
    }
    button {
      background-color: #0a4d68;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      display: block;
      margin: 20px auto;
    }
    #resultSection {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
      margin-top: 30px;
      display: none;
    }
  </style>
</head>
<body>

<h1>Advanced Career Aptitude Test</h1>

<div class="form-section" id="personalInfoSection">
  <form id="personalForm">
    <label for="name">Full Name *</label><br />
    <input type="text" id="name" name="name" required /><br /><br />

    <label for="address">Address *</label><br />
    <textarea id="address" name="address" rows="2" required></textarea><br /><br />

    <label for="phone">Phone Number *</label><br />
    <input type="tel" id="phone" name="phone" pattern="[0-9]{10,15}" placeholder="Digits only" required /><br /><br />

    <label for="email">Email ID *</label><br />
    <input type="email" id="email" name="email" required /><br /><br />

    <label for="qualification">Highest Educational Qualification *</label><br />
    <select id="qualification" name="qualification" required>
      <option value="" disabled selected>Select qualification</option>
      <option value="sslc">SSLC</option>
      <option value="plus2">Plus Two</option>
      <option value="iti">ITI</option>
      <option value="polytechnic">Polytechnic</option>
      <option value="degree">Degree</option>
      <option value="postgraduate">Postgraduate</option>
    </select><br /><br />

    <button type="submit">Start Test</button>
  </form>
</div>

<div class="form-section" id="questionsSection" style="display:none;">
  <form id="questionsForm">
    <div id="questionsContainer"></div>
    <button type="submit">Submit Test</button>
  </form>
</div>

<div id="resultSection">
  <h2>Your Career Aptitude Results</h2>
  <div id="resultContent"></div>
  <button id="downloadPdfBtn">Download Results as PDF</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const qualificationQuestions = {
    sslc: [
      { q: "Do you enjoy practical work with your hands?", id: "q1" },
      { q: "Are you interested in basic computer operations?", id: "q2" },
      // add ~25 questions for sslc here
    ],
    plus2: [
      { q: "Are you interested in science and experiments?", id: "q1" },
      { q: "Do you enjoy writing and communication?", id: "q2" },
      // add ~25 questions for plus2 here
    ],
    iti: [
      { q: "Do you like working with electrical or mechanical equipment?", id: "q1" },
      { q: "Are you interested in hands-on technical work?", id: "q2" },
      // add more questions...
    ],
    polytechnic: [
      // questions for polytechnic
    ],
    degree: [
      // questions for degree
    ],
    postgraduate: [
      // questions for postgraduate
    ]
  };

  // For demo, we'll fill 5 questions for all qualifications to keep it shorter. Expand as needed.
  Object.keys(qualificationQuestions).forEach(key => {
    while(qualificationQuestions[key].length < 25) {
      qualificationQuestions[key].push({
        q: `Sample question ${qualificationQuestions[key].length + 1} for ${key}`,
        id: `q${qualificationQuestions[key].length + 1}`
      });
    }
  });

  const personalForm = document.getElementById('personalForm');
  const questionsSection = document.getElementById('questionsSection');
  const questionsContainer = document.getElementById('questionsContainer');
  const questionsForm = document.getElementById('questionsForm');
  const resultSection = document.getElementById('resultSection');
  const resultContent = document.getElementById('resultContent');
  const downloadPdfBtn = document.getElementById('downloadPdfBtn');

  let userData = {};
  let userAnswers = [];

  personalForm.addEventListener('submit', e => {
    e.preventDefault();
    userData = {
      name: personalForm.name.value.trim(),
      address: personalForm.address.value.trim(),
      phone: personalForm.phone.value.trim(),
      email: personalForm.email.value.trim(),
      qualification: personalForm.qualification.value
    };

    if (!userData.name || !userData.address || !userData.phone || !userData.email || !userData.qualification) {
      alert("Please fill all fields");
      return;
    }

    // Hide personal info, show questions
    personalForm.parentElement.style.display = 'none';
    questionsSection.style.display = 'block';

    // Render questions based on qualification
    const questions = qualificationQuestions[userData.qualification] || [];
    questionsContainer.innerHTML = '';

    questions.forEach((q, i) => {
      const html = `
        <div class="question">
          <p>${i+1}. ${q.q}</p>
          <div class="answers">
            <label><input type="radio" name="${q.id}" value="5" required> Strongly Agree</label>
            <label><input type="radio" name="${q.id}" value="3"> Neutral</label>
            <label><input type="radio" name="${q.id}" value="1"> Disagree</label>
          </div>
        </div>
      `;
      questionsContainer.insertAdjacentHTML('beforeend', html);
    });
  });

  questionsForm.addEventListener('submit', e => {
    e.preventDefault();
    const answers = [];
    const questions = qualificationQuestions[userData.qualification] || [];

    // Validate all questions answered
    for(let i=0; i<questions.length; i++) {
      const selected = questionsForm.querySelector(`input[name="${questions[i].id}"]:checked`);
      if (!selected) {
        alert(`Please answer question ${i+1}`);
        return;
      }
      answers.push(parseInt(selected.value));
    }

    userAnswers = answers;

    // Send data to Google Sheet via Apps Script Web App POST
    const postData = {
      name: userData.name,
     
